<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>AI 사진배틀 - 방 대기실</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  
<body class="bg-light">
  <div class="container py-4">
    <input type="hidden" id="roomCode" value="{{ room_id }}">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h2 id="roomTitle" class="mb-0 fw-medium"></h2>
      <button class="btn btn-outline-secondary" id="copyInvite">초대 링크 복사</button>
    </div>
    <div class="mb-2">
      <span class="badge bg-secondary" id="roomInfo"></span>
      <span class="badge bg-info" id="roomMode"></span>
      <span class="badge bg-dark">방 코드: <span id="roomCode"></span></span>
    </div>

    <div class="card mb-3">
      <div class="card-header fw-bold">참가자 목록</div>
      <ul class="list-group list-group-flush" id="participantList">
        <!-- JS로 참가자 실시간 표시 -->
      </ul>
    </div>

    <!-- 투표 모드일 때만 표시 -->
    <div id="voteArea" class="mb-3" style="display:none;">
      <div class="card">
        <div class="card-header">주제 투표</div>
        <div class="card-body">
          <form id="voteForm" class="d-flex flex-wrap gap-2"></form>
          <button class="btn btn-success mt-2" id="voteBtn" type="button">투표하기</button>
        </div>
      </div>
    </div>

    <div class="mb-3">
      <button class="btn btn-primary" id="readyBtn" type="button">준비</button>
      <button class="btn btn-outline-secondary" id="cancelReadyBtn" type="button" style="display:none;">준비 취소</button>
    </div>

    <!-- 카운트다운 & 미션 공개 -->
    <div id="countdownArea" class="mb-3" style="display:none;">
      <div class="display-4 text-center" id="countdownNum"></div>
    </div>
    <div id="missionArea" class="mb-3" style="display:none;">
      <div class="alert alert-warning fw-bold text-center">
         카테고리: <span id="missionCategory"></span><br>
        <span id="missionObject" class="fs-4"></span> 찍어오기!
      </div>
      <form id="photoForm" enctype="multipart/form-data" method="post" class="row g-2 justify-content-center align-items-center">
        <div class="col-auto">
          <input class="form-control" type="file" name="photo" required>
        </div>
        <div class="col-auto">
          <button class="btn btn-success" type="submit">사진 제출</button>
        </div>
      </form>

    </div>

    <div id="resultArea"></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script type="module" src="{{ url_for('static', filename='js/room.js') }}"></script>
</body>
</html>
